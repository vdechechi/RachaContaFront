{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"dx-button-text\"\n};\nconst _hoisted_2 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_dx_required_rule = _resolveComponent(\"dx-required-rule\");\n  const _component_dx_label = _resolveComponent(\"dx-label\");\n  const _component_dx_item = _resolveComponent(\"dx-item\");\n  const _component_dx_custom_rule = _resolveComponent(\"dx-custom-rule\");\n  const _component_dx_button_options = _resolveComponent(\"dx-button-options\");\n  const _component_dx_button_item = _resolveComponent(\"dx-button-item\");\n  const _component_dx_loadIndicator = _resolveComponent(\"dx-loadIndicator\");\n  const _component_dx_form = _resolveComponent(\"dx-form\");\n  return _openBlock(), _createElementBlock(\"form\", {\n    onSubmit: _cache[0] || (_cache[0] = _withModifiers((...args) => $setup.onSubmit && $setup.onSubmit(...args), [\"prevent\"]))\n  }, [_createVNode(_component_dx_form, {\n    \"form-data\": $setup.formData,\n    disabled: $setup.loading\n  }, {\n    changePassword: _withCtx(() => [_createElementVNode(\"div\", null, [_createElementVNode(\"span\", _hoisted_1, [$setup.loading ? (_openBlock(), _createBlock(_component_dx_loadIndicator, {\n      key: 0,\n      width: \"24px\",\n      height: \"24px\",\n      visible: true\n    })) : _createCommentVNode(\"v-if\", true), !$setup.loading ? (_openBlock(), _createElementBlock(\"span\", _hoisted_2, \"Continue\")) : _createCommentVNode(\"v-if\", true)])])]),\n    default: _withCtx(() => [_createVNode(_component_dx_item, {\n      \"data-field\": \"password\",\n      \"editor-type\": \"dxTextBox\",\n      \"editor-options\": {\n        stylingMode: 'filled',\n        placeholder: 'Password',\n        mode: 'password'\n      }\n    }, {\n      default: _withCtx(() => [_createVNode(_component_dx_required_rule, {\n        message: \"Password is required\"\n      }), _createVNode(_component_dx_label, {\n        visible: false\n      })]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_dx_item, {\n      \"data-field\": \"confirmedPassword\",\n      \"editor-type\": \"dxTextBox\",\n      \"editor-options\": {\n        stylingMode: 'filled',\n        placeholder: 'Confirm Password',\n        mode: 'password'\n      }\n    }, {\n      default: _withCtx(() => [_createVNode(_component_dx_required_rule, {\n        message: \"Password is required\"\n      }), _createVNode(_component_dx_custom_rule, {\n        message: \"Passwords do not match\",\n        \"validation-callback\": $setup.confirmPassword\n      }, null, 8 /* PROPS */, [\"validation-callback\"]), _createVNode(_component_dx_label, {\n        visible: false\n      })]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_dx_button_item, null, {\n      default: _withCtx(() => [_createVNode(_component_dx_button_options, {\n        width: \"100%\",\n        type: \"default\",\n        template: \"changePassword\",\n        \"use-submit-behavior\": true\n      })]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"form-data\", \"disabled\"])], 32 /* NEED_HYDRATION */);\n}","map":{"version":3,"names":["class","key","_createElementBlock","onSubmit","_cache","_withModifiers","args","$setup","_createVNode","_component_dx_form","formData","disabled","loading","changePassword","_withCtx","_createElementVNode","_hoisted_1","_createBlock","_component_dx_loadIndicator","width","height","visible","_createCommentVNode","_hoisted_2","default","_component_dx_item","stylingMode","placeholder","mode","_component_dx_required_rule","message","_component_dx_label","_","_component_dx_custom_rule","confirmPassword","_component_dx_button_item","_component_dx_button_options","type","template"],"sources":["C:\\Users\\vinic\\OneDrive\\√Årea de Trabalho\\racha-conta\\front\\src\\views\\change-password-form.vue"],"sourcesContent":["<template>\n  <form @submit.prevent=\"onSubmit\">\n    <dx-form :form-data=\"formData\" :disabled=\"loading\">\n      <dx-item\n        data-field=\"password\"\n        editor-type=\"dxTextBox\"\n        :editor-options=\"{ stylingMode: 'filled', placeholder: 'Password', mode: 'password' }\"\n      >\n        <dx-required-rule message=\"Password is required\" />\n        <dx-label :visible=\"false\" />\n      </dx-item>\n      <dx-item\n        data-field=\"confirmedPassword\"\n        editor-type=\"dxTextBox\"\n        :editor-options=\"{ stylingMode: 'filled', placeholder: 'Confirm Password', mode: 'password' }\"\n      >\n        <dx-required-rule message=\"Password is required\" />\n        <dx-custom-rule\n          message=\"Passwords do not match\"\n          :validation-callback=\"confirmPassword\"\n        />\n        <dx-label :visible=\"false\" />\n      </dx-item>\n      <dx-button-item>\n        <dx-button-options\n          width=\"100%\"\n          type=\"default\"\n          template=\"changePassword\"\n          :use-submit-behavior=\"true\"\n        >\n        </dx-button-options>\n      </dx-button-item>\n\n      <template #changePassword>\n        <div>\n          <span class=\"dx-button-text\">\n              <dx-loadIndicator v-if=\"loading\" width=\"24px\" height=\"24px\" :visible=\"true\" />\n              <span v-if=\"!loading\">Continue</span>\n          </span>\n        </div>\n      </template>\n    </dx-form>\n  </form>\n</template>\n\n<script>\nimport DxForm, {\n  DxItem,\n  DxLabel,\n  DxButtonItem,\n  DxButtonOptions,\n  DxCustomRule,\n  DxRequiredRule\n} from 'devextreme-vue/form';\nimport DxLoadIndicator from 'devextreme-vue/load-indicator';\nimport notify from 'devextreme/ui/notify';\nimport { useRouter, useRoute } from 'vue-router';\nimport { ref, reactive } from \"vue\";\n\nimport auth from \"../auth\";\n\nexport default {\ncomponents: {\n    DxForm,\n    DxItem,\n    DxLabel,\n    DxButtonItem,\n    DxButtonOptions,\n    DxRequiredRule,\n    DxCustomRule,\n    DxLoadIndicator\n  },\n  setup() {\n    const router = useRouter();\n    const route = useRoute();\n\n    const recoveryCode = ref(\"\");\n    const loading = ref(false);\n    const formData = reactive({\n      password:\"\"\n    });\n\n    recoveryCode.value = route.params.recoveryCode;\n\n    async function onSubmit() {\n      const { password } = formData;\n      loading.value = true;\n  \n      const result = await auth.changePassword(password, recoveryCode.value);\n      loading.value = false;\n  \n      if (result.isOk) {\n        router.push(\"/login-form\");\n      } else {\n        notify(result.message, 'error', 2000);\n      }\n    }\n\n    function confirmPassword (e) {\n      return e.value === formData.password;\n    }\n\n    return {\n      loading,\n      formData,\n      onSubmit,\n      confirmPassword\n    }\n  }\n}\n</script>\n\n<style>\n\n</style>\n"],"mappings":";;EAmCgBA,KAAK,EAAC;AAAgB;;EAnCtCC,GAAA;AAAA;;;;;;;;;;uBACEC,mBAAA,CAyCO;IAzCAC,QAAM,EAAAC,MAAA,QAAAA,MAAA,MADfC,cAAA,KAAAC,IAAA,KACyBC,MAAA,CAAAJ,QAAA,IAAAI,MAAA,CAAAJ,QAAA,IAAAG,IAAA,CAAQ;MAC7BE,YAAA,CAuCUC,kBAAA;IAvCA,WAAS,EAAEF,MAAA,CAAAG,QAAQ;IAAGC,QAAQ,EAAEJ,MAAA,CAAAK;;IA+B7BC,cAAc,EAAAC,QAAA,CACvB,MAKM,CALNC,mBAAA,CAKM,cAJJA,mBAAA,CAGO,QAHPC,UAGO,GAFqBT,MAAA,CAAAK,OAAO,I,cAA/BK,YAAA,CAA8EC,2BAAA;MApC5FjB,GAAA;MAoC+CkB,KAAK,EAAC,MAAM;MAACC,MAAM,EAAC,MAAM;MAAEC,OAAO,EAAE;UApCpFC,mBAAA,gB,CAqC2Bf,MAAA,CAAAK,OAAO,I,cAApBV,mBAAA,CAAqC,QArCnDqB,UAAA,EAqCoC,UAAQ,KArC5CD,mBAAA,e;IAAAE,OAAA,EAAAV,QAAA,CAGM,MAOU,CAPVN,YAAA,CAOUiB,kBAAA;MANR,YAAU,EAAC,UAAU;MACrB,aAAW,EAAC,WAAW;MACtB,gBAAc,EAAE;QAAAC,WAAA;QAAAC,WAAA;QAAAC,IAAA;MAAA;;MANzBJ,OAAA,EAAAV,QAAA,CAQQ,MAAmD,CAAnDN,YAAA,CAAmDqB,2BAAA;QAAjCC,OAAO,EAAC;MAAsB,IAChDtB,YAAA,CAA6BuB,mBAAA;QAAlBV,OAAO,EAAE;MAAK,G;MATjCW,CAAA;QAWMxB,YAAA,CAWUiB,kBAAA;MAVR,YAAU,EAAC,mBAAmB;MAC9B,aAAW,EAAC,WAAW;MACtB,gBAAc,EAAE;QAAAC,WAAA;QAAAC,WAAA;QAAAC,IAAA;MAAA;;MAdzBJ,OAAA,EAAAV,QAAA,CAgBQ,MAAmD,CAAnDN,YAAA,CAAmDqB,2BAAA;QAAjCC,OAAO,EAAC;MAAsB,IAChDtB,YAAA,CAGEyB,yBAAA;QAFAH,OAAO,EAAC,wBAAwB;QAC/B,qBAAmB,EAAEvB,MAAA,CAAA2B;wDAExB1B,YAAA,CAA6BuB,mBAAA;QAAlBV,OAAO,EAAE;MAAK,G;MArBjCW,CAAA;QAuBMxB,YAAA,CAQiB2B,yBAAA;MA/BvBX,OAAA,EAAAV,QAAA,CAwBQ,MAMoB,CANpBN,YAAA,CAMoB4B,4BAAA;QALlBjB,KAAK,EAAC,MAAM;QACZkB,IAAI,EAAC,SAAS;QACdC,QAAQ,EAAC,gBAAgB;QACxB,qBAAmB,EAAE;;MA5BhCN,CAAA;;IAAAA,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}